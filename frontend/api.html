<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API æ–‡æª” - AI é ­åƒå·¥ä½œå®¤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', 'Segoe UI', sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f8f9fa;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 30px 0;
            text-align: center;
            margin-bottom: 30px;
            border-radius: 10px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .nav-links {
            text-align: center;
            margin-bottom: 30px;
        }

        .nav-links a {
            display: inline-block;
            margin: 0 10px;
            padding: 10px 20px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .nav-links a:hover {
            background: #5a6fd8;
        }

        .api-section {
            background: white;
            margin-bottom: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .section-header {
            background: #f8f9fa;
            padding: 20px;
            border-bottom: 1px solid #e9ecef;
        }

        .section-header h2 {
            color: #333;
            margin-bottom: 10px;
        }

        .section-content {
            padding: 20px;
        }

        .api-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        .api-table th,
        .api-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }

        .api-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #495057;
        }

        .method {
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .method.get {
            background: #d4edda;
            color: #155724;
        }

        .method.post {
            background: #d1ecf1;
            color: #0c5460;
        }

        .method.delete {
            background: #f8d7da;
            color: #721c24;
        }

        .endpoint {
            font-family: 'Courier New', monospace;
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 3px;
        }

        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            overflow-x: auto;
        }

        .code-block pre {
            margin: 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .example {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }

        .example h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .status-code {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .status-200 {
            background: #d4edda;
            color: #155724;
        }

        .status-400 {
            background: #f8d7da;
            color: #721c24;
        }

        .status-500 {
            background: #f8d7da;
            color: #721c24;
        }

        .parameter-table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }

        .parameter-table th,
        .parameter-table td {
            padding: 8px 12px;
            border: 1px solid #e9ecef;
            text-align: left;
        }

        .parameter-table th {
            background: #f8f9fa;
        }

        .required {
            color: #dc3545;
            font-weight: bold;
        }

        .optional {
            color: #6c757d;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2em;
            }

            .api-table,
            .parameter-table {
                font-size: 0.9em;
            }

            .nav-links a {
                display: block;
                margin: 5px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ AI é ­åƒå·¥ä½œå®¤ API æ–‡æª”</h1>
            <p>åŸºæ–¼ FastAPI çš„ RESTful API æœå‹™</p>
        </div>

        <div class="nav-links">
            <a href="/api/health" target="_blank">ğŸ’š å¥åº·æª¢æŸ¥</a>
        </div>

        <!-- API æ¦‚è¦½ -->
        <div class="api-section">
            <div class="section-header">
                <h2>ğŸ“‹ API ç«¯é»æ¦‚è¦½</h2>
                <p>æ‰€æœ‰ API ç«¯é»çš„å¿«é€Ÿåƒè€ƒ</p>
            </div>
            <div class="section-content">
                <table class="api-table">
                    <thead>
                        <tr>
                            <th>æ–¹æ³•</th>
                            <th>ç«¯é»</th>
                            <th>æè¿°</th>
                            <th>èªè­‰</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="method post">POST</span></td>
                            <td><code class="endpoint">/api/face-swap</code></td>
                            <td>åŸ·è¡Œ AI æ›è‡‰æ“ä½œ</td>
                            <td>ç„¡</td>
                        </tr>
                        <tr>
                            <td><span class="method post">POST</span></td>
                            <td><code class="endpoint">/api/validate-image</code></td>
                            <td>é©—è­‰åœ–ç‰‡ä¸¦è¿”å›è‡‰éƒ¨è³‡è¨Š</td>
                            <td>ç„¡</td>
                        </tr>
                        <tr>
                            <td><span class="method get">GET</span></td>
                            <td><code class="endpoint">/api/templates</code></td>
                            <td>ç²å–å¯ç”¨æ¨¡æ¿åˆ—è¡¨</td>
                            <td>ç„¡</td>
                        </tr>
                        <tr>
                            <td><span class="method get">GET</span></td>
                            <td><code class="endpoint">/api/health</code></td>
                            <td>å¥åº·æª¢æŸ¥</td>
                            <td>ç„¡</td>
                        </tr>
                        <tr>
                            <td><span class="method post">POST</span></td>
                            <td><code class="endpoint">/api/cleanup</code></td>
                            <td>æ‰‹å‹•åŸ·è¡Œæª”æ¡ˆæ¸…ç†</td>
                            <td>ç„¡</td>
                        </tr>
                        <tr>
                            <td><span class="method get">GET</span></td>
                            <td><code class="endpoint">/api/storage/stats</code></td>
                            <td>ç²å–å„²å­˜çµ±è¨ˆè³‡è¨Š</td>
                            <td>ç„¡</td>
                        </tr>
                        <tr>
                            <td><span class="method get">GET</span></td>
                            <td><code class="endpoint">/api/results/{filename}</code></td>
                            <td>ä¸‹è¼‰è™•ç†çµæœæª”æ¡ˆ</td>
                            <td>ç„¡</td>
                        </tr>
                        <tr>
                            <td><span class="method delete">DELETE</span></td>
                            <td><code class="endpoint">/api/results/{filename}</code></td>
                            <td>åˆªé™¤è™•ç†çµæœæª”æ¡ˆ</td>
                            <td>ç„¡</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- æ›è‡‰ API -->
        <div class="api-section">
            <div class="section-header">
                <h2>ğŸ­ æ›è‡‰ API</h2>
                <p>æ ¸å¿ƒçš„ AI æ›è‡‰åŠŸèƒ½</p>
            </div>
            <div class="section-content">
                <h3><span class="method post">POST</span> /api/face-swap</h3>
                <p>åŸ·è¡Œ AI æ›è‡‰æ“ä½œï¼Œæ”¯æ´é è¨­æ¨¡æ¿å’Œè‡ªè¨‚æ¨¡æ¿ã€‚</p>

                <h4>è«‹æ±‚åƒæ•¸</h4>
                <table class="parameter-table">
                    <thead>
                        <tr>
                            <th>åƒæ•¸å</th>
                            <th>é¡å‹</th>
                            <th>å¿…å¡«</th>
                            <th>æè¿°</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>file</code></td>
                            <td>File</td>
                            <td><span class="required">å¿…å¡«</span></td>
                            <td>ä½¿ç”¨è€…ä¸Šå‚³çš„ç…§ç‰‡æª”æ¡ˆ</td>
                        </tr>
                        <tr>
                            <td><code>template_id</code></td>
                            <td>String</td>
                            <td><span class="required">å¿…å¡«</span></td>
                            <td>æ¨¡æ¿ ID (1-6) æˆ– "custom"</td>
                        </tr>
                        <tr>
                            <td><code>template_file</code></td>
                            <td>File</td>
                            <td><span class="optional">é¸å¡«</span></td>
                            <td>è‡ªè¨‚æ¨¡æ¿æª”æ¡ˆï¼ˆç•¶ template_id="custom" æ™‚ï¼‰</td>
                        </tr>
                        <tr>
                            <td><code>source_face_index</code></td>
                            <td>Integer</td>
                            <td><span class="optional">é¸å¡«</span></td>
                            <td>ä¾†æºåœ–ç‰‡ä¸­çš„è‡‰éƒ¨ç´¢å¼•ï¼ˆé è¨­: 0ï¼‰</td>
                        </tr>
                        <tr>
                            <td><code>target_face_index</code></td>
                            <td>Integer</td>
                            <td><span class="optional">é¸å¡«</span></td>
                            <td>æ¨¡æ¿åœ–ç‰‡ä¸­çš„è‡‰éƒ¨ç´¢å¼•ï¼ˆé è¨­: 0ï¼‰</td>
                        </tr>
                    </tbody>
                </table>

                <div class="example">
                    <h4>ğŸ“ è«‹æ±‚ç¯„ä¾‹</h4>
                    <div class="code-block">
                        <pre>curl -X POST "http://localhost:8882/api/face-swap" \
  -F "file=@user_photo.jpg" \
  -F "template_id=1" \
  -F "source_face_index=0" \
  -F "target_face_index=0"</pre>
                    </div>
                </div>

                <h4>å›æ‡‰æ ¼å¼</h4>
                <p><span class="status-code status-200">200 OK</span> æˆåŠŸå›æ‡‰ï¼š</p>
                <div class="code-block">
                    <pre>{
  "success": true,
  "message": "æ›è‡‰å®Œæˆï¼",
  "result_url": "/results/result_abc123.jpg",
  "template_id": "1",
  "template_name": "æ¨¡æ¿ 1",
  "template_description": "é è¨­æ¨¡æ¿"
}</pre>
                </div>

                <p><span class="status-code status-400">400 Bad Request</span> éŒ¯èª¤å›æ‡‰ï¼š</p>
                <div class="code-block">
                    <pre>{
  "detail": "æª”æ¡ˆæ ¼å¼ä¸æ”¯æ´"
}</pre>
                </div>
            </div>
        </div>

        <!-- åœ–ç‰‡é©—è­‰ API -->
        <div class="api-section">
            <div class="section-header">
                <h2>ğŸ” åœ–ç‰‡é©—è­‰ API</h2>
                <p>é©—è­‰åœ–ç‰‡ä¸¦ç²å–è‡‰éƒ¨è³‡è¨Š</p>
            </div>
            <div class="section-content">
                <h3><span class="method post">POST</span> /api/validate-image</h3>
                <p>é©—è­‰ä¸Šå‚³çš„åœ–ç‰‡æ˜¯å¦åŒ…å«å¯è­˜åˆ¥çš„è‡‰éƒ¨ã€‚</p>

                <h4>è«‹æ±‚åƒæ•¸</h4>
                <table class="parameter-table">
                    <thead>
                        <tr>
                            <th>åƒæ•¸å</th>
                            <th>é¡å‹</th>
                            <th>å¿…å¡«</th>
                            <th>æè¿°</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>file</code></td>
                            <td>File</td>
                            <td><span class="required">å¿…å¡«</span></td>
                            <td>è¦é©—è­‰çš„åœ–ç‰‡æª”æ¡ˆ</td>
                        </tr>
                    </tbody>
                </table>

                <h4>å›æ‡‰æ ¼å¼</h4>
                <p><span class="status-code status-200">200 OK</span> æˆåŠŸå›æ‡‰ï¼š</p>
                <div class="code-block">
                    <pre>{
  "success": true,
  "message": "åœ–ç‰‡é©—è­‰æˆåŠŸ",
  "image_info": {
    "valid": true,
    "face_count": 2,
    "image_size": [1920, 1080]
  }
}</pre>
                </div>
            </div>
        </div>

        <!-- æ¨¡æ¿ API -->
        <div class="api-section">
            <div class="section-header">
                <h2>ğŸ¨ æ¨¡æ¿ API</h2>
                <p>ç²å–å¯ç”¨çš„æ›è‡‰æ¨¡æ¿</p>
            </div>
            <div class="section-content">
                <h3><span class="method get">GET</span> /api/templates</h3>
                <p>ç²å–æ‰€æœ‰å¯ç”¨çš„é è¨­æ¨¡æ¿åˆ—è¡¨ã€‚</p>

                <h4>å›æ‡‰æ ¼å¼</h4>
                <p><span class="status-code status-200">200 OK</span> æˆåŠŸå›æ‡‰ï¼š</p>
                <div class="code-block">
                    <pre>{
  "success": true,
  "templates": [
    {
      "id": "1",
      "name": "æ¨¡æ¿ 1",
      "description": "é è¨­æ¨¡æ¿",
      "image_url": "/assets/images/templates/step01.jpg"
    },
    {
      "id": "2",
      "name": "æ¨¡æ¿ 2", 
      "description": "é è¨­æ¨¡æ¿",
      "image_url": "/assets/images/templates/step02.jpg"
    }
  ]
}</pre>
                </div>
            </div>
        </div>

        <!-- ç³»çµ± API -->
        <div class="api-section">
            <div class="section-header">
                <h2>âš™ï¸ ç³»çµ± API</h2>
                <p>ç³»çµ±ç›£æ§å’Œç®¡ç†åŠŸèƒ½</p>
            </div>
            <div class="section-content">
                <h3><span class="method get">GET</span> /api/health</h3>
                <p>æª¢æŸ¥ API æœå‹™å¥åº·ç‹€æ…‹ã€‚</p>
                <div class="code-block">
                    <pre>{
  "status": "healthy",
  "message": "AI é ­åƒå·¥ä½œå®¤ API é‹è¡Œæ­£å¸¸",
  "version": "1.0.0"
}</pre>
                </div>

                <h3><span class="method get">GET</span> /api/storage/stats</h3>
                <p>ç²å–ç•¶å‰å„²å­˜ç©ºé–“ä½¿ç”¨çµ±è¨ˆã€‚</p>
                <div class="code-block">
                    <pre>{
  "success": true,
  "data": {
    "results": {
      "file_count": 15,
      "total_size": 52428800,
      "total_size_formatted": "50.0MB"
    },
    "uploads": {
      "file_count": 3,
      "total_size": 10485760,
      "total_size_formatted": "10.0MB"
    }
  }
}</pre>
                </div>

                <h3><span class="method post">POST</span> /api/cleanup</h3>
                <p>æ‰‹å‹•åŸ·è¡Œæª”æ¡ˆæ¸…ç†æ“ä½œã€‚</p>
                <div class="code-block">
                    <pre>{
  "success": true,
  "message": "æª”æ¡ˆæ¸…ç†å®Œæˆ",
  "data": {
    "status": "completed",
    "total_files_cleaned": 5,
    "total_size_cleaned": 10485760
  }
}</pre>
                </div>
            </div>
        </div>

        <!-- éŒ¯èª¤ä»£ç¢¼ -->
        <div class="api-section">
            <div class="section-header">
                <h2>âŒ éŒ¯èª¤ä»£ç¢¼</h2>
                <p>å¸¸è¦‹çš„ API éŒ¯èª¤ä»£ç¢¼å’Œè™•ç†æ–¹å¼</p>
            </div>
            <div class="section-content">
                <table class="api-table">
                    <thead>
                        <tr>
                            <th>ç‹€æ…‹ç¢¼</th>
                            <th>éŒ¯èª¤é¡å‹</th>
                            <th>æè¿°</th>
                            <th>è§£æ±ºæ–¹æ¡ˆ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="status-code status-400">400</span></td>
                            <td>Bad Request</td>
                            <td>è«‹æ±‚åƒæ•¸éŒ¯èª¤æˆ–æª”æ¡ˆæ ¼å¼ä¸æ”¯æ´</td>
                            <td>æª¢æŸ¥è«‹æ±‚åƒæ•¸å’Œæª”æ¡ˆæ ¼å¼</td>
                        </tr>
                        <tr>
                            <td><span class="status-code status-400">413</span></td>
                            <td>Payload Too Large</td>
                            <td>ä¸Šå‚³æª”æ¡ˆéå¤§</td>
                            <td>å£“ç¸®åœ–ç‰‡æˆ–ä½¿ç”¨è¼ƒå°çš„æª”æ¡ˆ</td>
                        </tr>
                        <tr>
                            <td><span class="status-code status-400">415</span></td>
                            <td>Unsupported Media Type</td>
                            <td>ä¸æ”¯æ´çš„æª”æ¡ˆæ ¼å¼</td>
                            <td>ä½¿ç”¨ JPGã€PNG æˆ– WebP æ ¼å¼</td>
                        </tr>
                        <tr>
                            <td><span class="status-code status-500">500</span></td>
                            <td>Internal Server Error</td>
                            <td>ä¼ºæœå™¨å…§éƒ¨éŒ¯èª¤</td>
                            <td>æª¢æŸ¥ä¼ºæœå™¨æ—¥èªŒæˆ–è¯ç¹«ç®¡ç†å“¡</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- ä½¿ç”¨é™åˆ¶ -->
        <div class="api-section">
            <div class="section-header">
                <h2>âš ï¸ ä½¿ç”¨é™åˆ¶</h2>
                <p>API ä½¿ç”¨çš„é™åˆ¶å’Œæ³¨æ„äº‹é …</p>
            </div>
            <div class="section-content">
                <ul>
                    <li><strong>æª”æ¡ˆå¤§å°é™åˆ¶</strong>ï¼šæœ€å¤§ 10MB</li>
                    <li><strong>æ”¯æ´æ ¼å¼</strong>ï¼šJPGã€JPEGã€PNGã€WebP</li>
                    <li><strong>è‡‰éƒ¨æ•¸é‡</strong>ï¼šæœ€å¤šæ”¯æ´ 20 å¼µè‡‰éƒ¨</li>
                    <li><strong>çµæœä¿ç•™</strong>ï¼šè™•ç†çµæœä¿ç•™ 24 å°æ™‚</li>
                    <li><strong>ä¸Šå‚³æª”æ¡ˆ</strong>ï¼šè‡¨æ™‚æª”æ¡ˆä¿ç•™ 1 å°æ™‚</li>
                    <li><strong>ä¸¦ç™¼é™åˆ¶</strong>ï¼šå»ºè­°åŒæ™‚è™•ç†ä¸è¶…é 5 å€‹è«‹æ±‚</li>
                </ul>
            </div>
        </div>

        <div style="text-align: center; margin-top: 40px; color: #6c757d;">
            <p>Â© 2024 AI é ­åƒå·¥ä½œå®¤ - åƒ…ä¾›å­¸ç¿’å’Œç ”ç©¶ä½¿ç”¨</p>
        </div>
    </div>
</body>
</html>
