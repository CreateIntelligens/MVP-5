<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API æ–‡æª” - AI æ›è‡‰æ‡‰ç”¨</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Microsoft JhengHei', 'Segoe UI', sans-serif; line-height: 1.6; color: #333; background: #f8f9fa; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 30px 0; text-align: center; margin-bottom: 30px; border-radius: 10px; }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; }
        .header p { font-size: 1.1em; opacity: 0.9; }
        .nav-links { text-align: center; margin-bottom: 30px; }
        .nav-links a { display: inline-block; margin: 0 10px; padding: 10px 20px; background: #667eea; color: white; text-decoration: none; border-radius: 5px; transition: background 0.3s; }
        .nav-links a:hover { background: #5a6fd8; }
        .api-section { background: white; margin-bottom: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); overflow: hidden; }
        .section-header { background: #f8f9fa; padding: 20px; border-bottom: 1px solid #e9ecef; }
        .section-header h2 { color: #333; margin-bottom: 10px; }
        .section-content { padding: 20px; }
        .api-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        .api-table th, .api-table td { padding: 12px; text-align: left; border-bottom: 1px solid #e9ecef; }
        .api-table th { background: #f8f9fa; font-weight: 600; color: #495057; }
        .method { padding: 4px 8px; border-radius: 4px; font-weight: bold; font-size: 0.9em; }
        .method.get { background: #d4edda; color: #155724; }
        .method.post { background: #d1ecf1; color: #0c5460; }
        .method.delete { background: #f8d7da; color: #721c24; }
        .endpoint { font-family: 'Courier New', monospace; background: #e9ecef; padding: 2px 6px; border-radius: 3px; }
        .code-block { background: #2d2d2d; color: #f8f8f2; border-radius: 5px; padding: 15px; margin: 15px 0; overflow-x: auto; }
        .code-block pre { margin: 0; font-family: 'Courier New', monospace; font-size: 0.9em; }
        .parameter-table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        .parameter-table th, .parameter-table td { padding: 8px 12px; border: 1px solid #e9ecef; text-align: left; }
        .parameter-table th { background: #f8f9fa; }
        .required { color: #dc3545; font-weight: bold; }
        @media (max-width: 768px) {
            .container { padding: 10px; }
            .header h1 { font-size: 2em; }
            .nav-links a { display: block; margin: 5px 0; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ AI æ›è‡‰æ‡‰ç”¨ API æ–‡æª”</h1>
            <p>åŸºæ–¼ FastAPI çš„ RESTful API æœå‹™</p>
        </div>

        <div class="nav-links">
            <a href="/api/docs" target="_blank">âš¡ Swagger UI</a>
            <a href="/api/system/info" target="_blank">ğŸ’š ç³»çµ±ç‹€æ…‹</a>
        </div>

        <!-- æ ¸å¿ƒ API -->
        <div class="api-section">
            <div class="section-header">
                <h2>æ ¸å¿ƒ API</h2>
            </div>
            <div class="section-content">
                <!-- åŒæ­¥æ›è‡‰ -->
                <h3><span class="method post">POST</span> <code class="endpoint">/api/swapper</code></h3>
                <p><strong>åŒæ­¥æ›è‡‰</strong>: å³æ™‚è™•ç†æ›è‡‰è«‹æ±‚ä¸¦ç›´æ¥è¿”å›çµæœï¼Œé©åˆéœ€è¦å¿«é€Ÿå›æ‡‰çš„å ´æ™¯ã€‚</p>
                <h4>åƒæ•¸ (multipart/form-data):</h4>
                <table class="parameter-table">
                    <thead><tr><th>åƒæ•¸å</th><th>é¡å‹</th><th>å¿…é ˆ</th><th>æè¿°</th></tr></thead>
                    <tbody>
                        <tr><td><code>file</code></td><td>File</td><td><span class="required">æ˜¯</span></td><td>ä½¿ç”¨è€…ä¸Šå‚³çš„åŸå§‹ç…§ç‰‡ã€‚</td></tr>
                        <tr><td><code>template_id</code></td><td>String</td><td>å¦</td><td>é è¨­æ¨¡æ¿ IDã€‚èˆ‡ `template_file` äºŒé¸ä¸€ã€‚</td></tr>
                        <tr><td><code>template_file</code></td><td>File</td><td>å¦</td><td>ä½¿ç”¨è€…è‡ªè¨‚çš„æ¨¡æ¿åœ–ç‰‡ã€‚èˆ‡ `template_id` äºŒé¸ä¸€ã€‚</td></tr>
                        <tr><td><code>source_face_index</code></td><td>Integer</td><td>å¦</td><td>åŸå§‹ç…§ç‰‡ä¸­çš„è‡‰éƒ¨ç´¢å¼• (é è¨­ 0)ã€‚</td></tr>
                        <tr><td><code>target_face_index</code></td><td>Integer</td><td>å¦</td><td>æ¨¡æ¿åœ–ç‰‡ä¸­çš„è‡‰éƒ¨ç´¢å¼• (é è¨­ 0)ã€‚</td></tr>
                    </tbody>
                </table>
                <h4>æˆåŠŸå›æ‡‰ (200 OK):</h4>
                <div class="code-block"><pre><code>{
  "success": true,
  "result_url": "/results/result_xxxxxxxx.jpg",
  "original_url": "/uploads/original_xxxxxxxx.jpg",
  "processing_time": "1.23s",
  "message": "æ›è‡‰è™•ç†å®Œæˆ"
}</code></pre></div>

                <!-- éåŒæ­¥æ›è‡‰ -->
                <hr style="margin: 20px 0;">
                <h3><span class="method post">POST</span> <code class="endpoint">/api/face-swap</code></h3>
                <p><strong>éåŒæ­¥æ›è‡‰</strong>: å°‡æ›è‡‰è«‹æ±‚æäº¤è‡³èƒŒæ™¯ä½‡åˆ—è™•ç†ï¼Œç«‹å³è¿”å›ä»»å‹™ IDã€‚</p>
                <h4>åƒæ•¸: (åŒä¸Š)</h4>
                <h4>æˆåŠŸå›æ‡‰ (200 OK):</h4>
                <div class="code-block"><pre><code>{
  "success": true,
  "task_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
  "status": "pending",
  "message": "ä»»å‹™å·²æäº¤ï¼Œè«‹ä½¿ç”¨ä»»å‹™ ID æŸ¥è©¢è™•ç†ç‹€æ…‹"
}</code></pre></div>

                <!-- æŸ¥è©¢ä»»å‹™ç‹€æ…‹ -->
                <hr style="margin: 20px 0;">
                <h3><span class="method get">GET</span> <code class="endpoint">/api/face-swap/status/{task_id}</code></h3>
                <p><strong>æŸ¥è©¢ä»»å‹™ç‹€æ…‹</strong>: æ ¹æ“šä»»å‹™ ID æŸ¥è©¢éåŒæ­¥ä»»å‹™çš„è™•ç†é€²åº¦ã€‚</p>
                <h4>æˆåŠŸå›æ‡‰ (200 OK):</h4>
                <div class="code-block"><pre><code>{
  "success": true,
  "task_status": {
    "task_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
    "status": "completed",
    "progress": 100,
    "message": "æ›è‡‰è™•ç†å®Œæˆ",
    "result_url": "/results/result_yyyyyyyy.jpg",
    "original_url": "/uploads/original_yyyyyyyy.jpg",
    "created_at": "2025-08-18T12:00:00Z",
    "completed_at": "2025-08-18T12:01:30Z"
  }
}</code></pre></div>
            </div>
        </div>

        <!-- è¼”åŠ© API -->
        <div class="api-section">
            <div class="section-header">
                <h2>è¼”åŠ© API</h2>
            </div>
            <div class="section-content">
                <!-- é©—è­‰åœ–ç‰‡ -->
                <h3><span class="method post">POST</span> <code class="endpoint">/api/validate-image</code></h3>
                <p><strong>é©—è­‰åœ–ç‰‡</strong>: å›å‚³åœ–ç‰‡æ˜¯å¦æœ‰æ•ˆåŠåµæ¸¬åˆ°çš„è‡‰éƒ¨è³‡è¨Šã€‚</p>
                <h4>æˆåŠŸå›æ‡‰ (200 OK):</h4>
                <div class="code-block"><pre><code>{
  "success": true,
  "message": "åœ–ç‰‡é©—è­‰æˆåŠŸ",
  "image_info": {
    "valid": true,
    "face_count": 2,
    "faces": [{"box": [x1, y1, x2, y2], "confidence": 0.99}]
  }
}</code></pre></div>

                <!-- ç²å–çµæœåœ–ç‰‡ -->
                <hr style="margin: 20px 0;">
                <h3><span class="method get">GET</span> <code class="endpoint">/api/results/{filename}</code></h3>
                <p><strong>ç²å–çµæœåœ–ç‰‡</strong>: æ ¹æ“šæª”åç²å–å·²è™•ç†å®Œæˆçš„çµæœåœ–ç‰‡ã€‚</p>
                
                <!-- ç²å–åŸå§‹åœ–ç‰‡ -->
                <hr style="margin: 20px 0;">
                <h3><span class="method get">GET</span> <code class="endpoint">/api/uploads/{filename}</code></h3>
                <p><strong>ç²å–åŸå§‹åœ–ç‰‡</strong>: æ ¹æ“šæª”åç²å–ç”¨æˆ¶ä¸Šå‚³çš„åŸå§‹åœ–ç‰‡ã€‚</p>
                
                <!-- åˆªé™¤çµæœåœ–ç‰‡ -->
                <hr style="margin: 20px 0;">
                <h3><span class="method delete">DELETE</span> <code class="endpoint">/api/results/{filename}</code></h3>
                <p><strong>åˆªé™¤çµæœåœ–ç‰‡</strong>: åˆªé™¤æŒ‡å®šçš„çµæœåœ–ç‰‡æª”æ¡ˆã€‚</p>
                
                <!-- åˆªé™¤åŸå§‹åœ–ç‰‡ -->
                <hr style="margin: 20px 0;">
                <h3><span class="method delete">DELETE</span> <code class="endpoint">/api/uploads/{filename}</code></h3>
                <p><strong>åˆªé™¤åŸå§‹åœ–ç‰‡</strong>: åˆªé™¤æŒ‡å®šçš„åŸå§‹åœ–ç‰‡æª”æ¡ˆã€‚</p>
            </div>
        </div>

        <!-- ç³»çµ± API -->
        <div class="api-section">
            <div class="section-header">
                <h2>ç³»çµ± & ç›£æ§ API</h2>
            </div>
            <div class="section-content">
                <!-- ç³»çµ±è³‡è¨Š -->
                <h3><span class="method get">GET</span> <code class="endpoint">/api/system/info</code></h3>
                <p><strong>ç³»çµ±è³‡è¨Š</strong>: æŸ¥è©¢å¾Œç«¯ç³»çµ±ç‹€æ…‹ï¼ŒåŒ…æ‹¬ CPU/è¨˜æ†¶é«”åŠ GPU ä½¿ç”¨æ¨¡å¼ã€‚</p>
                <h4>æˆåŠŸå›æ‡‰ (200 OK):</h4>
                <div class="code-block"><pre><code>{
  "success": true,
  "system_info": {
      "cpu_percent": 15.5,
      "memory_percent": 45.2,
      "gpu_info": { "gpu_name": "NVIDIA GeForce RTX 3080", ... }
  },
  "processor_gpu_enabled": true,
  "message": "ç›®å‰ä½¿ç”¨GPUæ¨¡å¼é€²è¡Œè™•ç†"
}</code></pre></div>

                <!-- ä½‡åˆ—ç‹€æ…‹ -->
                <hr style="margin: 20px 0;">
                <h3><span class="method get">GET</span> <code class="endpoint">/api/queue/status</code></h3>
                <p><strong>ä½‡åˆ—ç‹€æ…‹</strong>: æŸ¥è©¢ç•¶å‰ä¼ºæœå™¨çš„ä»»å‹™è™•ç†ä½‡åˆ—ç‹€æ…‹ã€‚</p>
                <h4>æˆåŠŸå›æ‡‰ (200 OK):</h4>
                <div class="code-block"><pre><code>{
  "success": true,
  "queue_status": { "current_queue_size": 0, "max_queue_size": 5 },
  "task_statistics": { "pending": 0, "processing": 0, "completed": 120, ... }
}</code></pre></div>
            </div>
        </div>

        <div style="text-align: center; margin-top: 40px; color: #6c757d;">
            <p>Â© 2025 AI æ›è‡‰æ‡‰ç”¨ - åƒ…ä¾›å­¸ç¿’å’Œç ”ç©¶ä½¿ç”¨</p>
        </div>
    </div>
</body>
</html>